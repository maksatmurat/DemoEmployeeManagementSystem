<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Client</title>
    <base href="/" />
    <link rel="stylesheet" href="css/app.css" />
    <!-- If you add any scoped CSS files, uncomment the following to load them
    <link href="Client.styles.css" rel="stylesheet" /> -->

    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css"/>

    <link href="_content/Syncfusion.Blazor.Themes/bootstrap5.css" rel="stylesheet"/>
    <script src="_content/Syncfusion.Blazor.Core/scripts/syncfusion-blazor.min.js" type="text/javascript"></script>
    <link href="bootstrap-icons/bootstrap-icons.min.css" rel="stylesheet" />

    <link href="manifest.webmanifest" rel="manifest" />
    
    <script src="bootstrap/js/bootstrap.bundle.min.js"></script>

    <link rel="apple-touch-icon" sizes="512x512" href="icon-512.png" />
    <link rel="apple-touch-icon" sizes="192x192" href="icon-192.png" />
    <style>

        #preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #0d0d0d;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
            #preloader.fade-out {
                opacity: 0;
                transition: opacity 0.5s ease-out;
                pointer-events: none;
            }


        .spinner {
            width: 60px;
            height: 60px;
            border: 6px solid #00fff7;
            border-top: 6px solid #ff00c8;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            box-shadow: 0 0 20px #00fff7;
        }

        .loading-text {
            margin-top: 1rem;
            font-size: 1.2rem;
            color: #ff00c8;
            text-shadow: 0 0 10px #ff00c8;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body>
    <div id="preloader">
        <div class="spinner"></div>
        <p class="loading-text">YÃ¼kleniyor...</p>
    </div>
    <div id="app">
        <div class="loading-progress-text"></div>
    </div>
    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="." class="reload">Reload</a>
        <span class="dismiss">ðŸ—™</span>
    </div>
    <script src="_framework/blazor.webassembly.js"></script>
    <!--<script src="/js/bootstrap/bootstrap.js"></script>-->
    <script>navigator.serviceWorker.register('service-worker.js');</script>
    <script>

        const preloader = document.getElementById('preloader');
        const minDuration = 500; // 5 saniye
        const start = Date.now();

        window.addEventListener('load', () => {
            const elapsed = Date.now() - start;
            const remaining = minDuration - elapsed;

            if (remaining > 0) {
                setTimeout(() => {
                    if (preloader) {
                        preloader.style.display = 'none';
                    }
                }, remaining);
            } else {
                if (preloader) {
                    preloader.classList.add('fade-out');
                    setTimeout(() => {
                        preloader.style.display = 'none';
                    }, 500); // fade-out sÃ¼resiyle uyumlu
                }

            }
        });

        //const systemPrefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        const systemPrefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        const savedTheme = localStorage.getItem('theme');
        const theme = savedTheme || (systemPrefersDark ? 'dark' : 'light');


        window.ThemeManager = {
            applySavedTheme: function () {
                const theme = localStorage.getItem('theme');
                if (theme === 'dark') {
                    document.body.classList.add('dark-mode');
                } else {
                    document.body.classList.remove('dark-mode');
                }
            },
            toggleTheme: function (isDark) {
                if (isDark) {
                    document.body.classList.add('dark-mode');
                    localStorage.setItem('theme', 'dark');
                } else {
                    document.body.classList.remove('dark-mode');
                    localStorage.setItem('theme', 'light');
                }
            },
            getCurrentTheme: function () {
                return document.body.classList.contains('dark-mode') ? 'dark' : 'light';
            }
        };

        // Sayfa yÃ¼klenirken tema uygulansÄ±n
        window.addEventListener('DOMContentLoaded', () => {
            window.ThemeManager.applySavedTheme();
        });

        window.getWindowWidth = () => window.innerWidth;

    </script>

</body>

</html>
